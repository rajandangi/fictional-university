(()=>{"use strict";const e=window.React,t=window.wp.components,n=window.wp.blockEditor;!function(){let e=!1;wp.data.subscribe((function(){const t=wp.data.select("core/block-editor").getBlocks().filter((function(e){return"ourplugin/are-you-paying-attention"==e.name&&null==e.attributes.correctAnswer}));console.log(t),t.length&&0==e&&(e=!0,wp.data.dispatch("core/editor").lockPostSaving("noanswer")),!t.length&&e&&(e=!1,wp.data.dispatch("core/editor").unlockPostSaving("noanswer"))}))}(),wp.blocks.registerBlockType("ourplugin/are-you-paying-attention",{attributes:{question:{type:"string"},answers:{type:"array",default:[""]},correctAnswer:{type:"number",default:void 0},bgColor:{type:"string",default:"#EBEBEB"},theAlignment:{type:"string",default:"left"}},example:{attributes:{question:"What is the capital of France?",answers:["Paris","London","Berlin"],correctAnswer:0,bgColor:"#CFE8F3",theAlignment:"left"}},edit:function(r){const o=(0,n.useBlockProps)({className:"paying-attention-edit-block",style:{backgroundColor:r.attributes.bgColor}});return(0,e.createElement)("div",{...o},(0,e.createElement)(n.BlockControls,null,(0,e.createElement)(n.AlignmentToolbar,{value:r.attributes.theAlignment,onChange:e=>r.setAttributes({theAlignment:e})})),(0,e.createElement)(n.InspectorControls,null,(0,e.createElement)(t.PanelBody,{title:"Background Color",initialOpen:open},(0,e.createElement)(t.PanelRow,null,(0,e.createElement)(t.ColorPicker,{color:r.attributes.bgColor,onChangeComplete:e=>r.setAttributes({bgColor:e.hex})})))),(0,e.createElement)(t.TextControl,{label:"Question",value:r.attributes.question,onChange:function(e){r.setAttributes({question:e})},style:{fontSize:"20px"}}),(0,e.createElement)("p",{style:{fontSize:"13px",margin:"20 0 8px 0"}},"Answers:"),r.attributes.answers.map((function(n,o){return(0,e.createElement)(t.Flex,null,(0,e.createElement)(t.FlexBlock,null,(0,e.createElement)(t.TextControl,{value:n,autoFocus:null==n,onChange:e=>{const t=r.attributes.answers.concat([]);t[o]=e,r.setAttributes({answers:t})}})),(0,e.createElement)(t.FlexItem,null,(0,e.createElement)(t.Icon,{className:"mark-as-correct",icon:r.attributes.correctAnswer==o?"star-filled":"star-empty",onClick:()=>function(e){r.setAttributes({correctAnswer:e})}(o)})),(0,e.createElement)(t.FlexItem,null,(0,e.createElement)(t.Button,{variant:"link",className:"attention-delete",onClick:()=>function(e){const t=r.attributes.answers.filter((function(t,n){return n!==e}));r.setAttributes({answers:t}),e==r.attributes.correctAnswer&&r.setAttributes({correctAnswer:void 0})}(o)},"Delete")))})),(0,e.createElement)(t.Button,{variant:"primary",onClick:()=>{r.setAttributes({answers:r.attributes.answers.concat([void 0])})}},"Add Another Answer"))},save:function(e){return null}})})();