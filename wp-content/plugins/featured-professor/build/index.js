(()=>{"use strict";var e={n:t=>{var r=t&&t.__esModule?()=>t.default:()=>t;return e.d(r,{a:r}),r},d:(t,r)=>{for(var o in r)e.o(r,o)&&!e.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:r[o]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const t=window.React,r=window.wp.components,o=window.wp.data,s=window.wp.apiFetch;var a=e.n(s);const n=window.wp.coreData,__=wp.i18n.__;wp.blocks.registerBlockType("ourplugin/featured-professor",{title:"Professor Callout",description:"Include a short description and link to a professor of your choice",icon:"welcome-learn-more",category:"common",attributes:{profID:{type:"string"}},edit:function(e){const[s,i]=(0,t.useState)("");function c(){const e=wp.data.select("core/block-editor").getBlocks().filter((e=>"ourplugin/featured-professor"==e.name)).map((e=>e.attributes.profID)).filter(((e,t,r)=>r.indexOf(e)===t));wp.data.dispatch("core/editor").editPost({meta:{featuredprofessor:e}})}(0,t.useEffect)((()=>{if(e.attributes.profID){async function t(){const t=await a()({path:`/featuredProfessor/v1/getHTML?profID=${e.attributes.profID}`,method:"GET"});i(t)}c(),t()}}),[e.attributes.profID]),(0,t.useEffect)((()=>()=>{c()}),[]);const{allProfs:l,hasResolved:p}=(0,o.useSelect)((e=>{const t=["postType","professor",{per_page:-1}];return{allProfs:e(n.store).getEntityRecords(...t),hasResolved:e(n.store).hasFinishedResolution("getEntityRecords",t)}}));return p?l?.length?(0,t.createElement)("div",{className:"featured-professor-wrapper"},(0,t.createElement)("div",{className:"professor-select-container"},(0,t.createElement)("select",{onChange:t=>e.setAttributes({profID:t.target.value})},(0,t.createElement)("option",{value:""},__("Select a professor","featured-professor")),l.map((r=>(0,t.createElement)("option",{value:r.id,selected:e.attributes.profID==r.id},r.title.rendered))))),(0,t.createElement)("div",{dangerouslySetInnerHTML:{__html:s}})):(0,t.createElement)("div",null,"No results"):(0,t.createElement)(r.Spinner,null)},save:function(){return null}})})();